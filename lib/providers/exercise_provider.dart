import 'package:flutter/foundation.dart';
import '../models/exercise.dart';

class ExerciseProvider extends ChangeNotifier {
  late List<Exercise> _exercises;

  List<Exercise> get exercises => _exercises;

  ExerciseProvider() {
    _initializeExercises();
  }

  void _initializeExercises() {
    _exercises = [
      // Дыхательные техники
      Exercise(
        id: '1',
        title: 'Мягкое дыхание 4-6',
        description: 'Простая техника для снижения напряжения',
        category: 'breathing',
        durationSeconds: 300, // 5 минут
        instruction:
        'Вдохни на счёт 4, выдохни на счёт 6. Повтори 10 раз.',
        steps: [
          'Сядь удобно, спину прямо',
          'Вдохни через нос на счёт: 1, 2, 3, 4',
          'Выдохни через рот на счёт: 1, 2, 3, 4, 5, 6',
          'Повтори 10 раз',
          'Заметь, как тело расслабилось',
        ],
      ),
      Exercise(
        id: '2',
        title: 'Энергизирующее дыхание',
        description: 'Для повышения энергии и концентрации',
        category: 'breathing',
        durationSeconds: 180, // 3 минуты
        instruction:
        'Быстрое дыхание через нос в течение 3 минут.',
        steps: [
          'Встань или сядь прямо',
          'Дыши быстро через нос (как собачка)',
          'Выдохи должны быть активными',
          'Продолжай 30 секунд',
          'Отдохни 10 секунд',
          'Повтори 3 раза',
        ],
      ),
      // Осознанность
      Exercise(
        id: '3',
        title: 'Осознанное сканирование тела',
        description: 'Почувствуй все части своего тела',
        category: 'mindfulness',
        durationSeconds: 600, // 10 минут
        instruction:
        'Медленно пройдись вниманием по всему телу снизу вверх.',
        steps: [
          'Лягь удобно или сядь',
          'Закрой глаза и расслабься',
          'Почувствуй ступни ног - тепло, покалывание, вес',
          'Медленно поднимайся вверх: голени, бёдра, живот',
          'Почувствуй грудь, плечи, руки, шею и голову',
          'Заметь, как ты чувствуешь себя теперь',
        ],
      ),
      Exercise(
        id: '4',
        title: 'Минута присутствия',
        description: 'Вернись в настоящий момент',
        category: 'mindfulness',
        durationSeconds: 60, // 1 минута
        instruction:
        'Назови 5 вещей, которые ты видишь, слышишь и чувствуешь.',
        steps: [
          'Посмотри вокруг и назови 5 вещей, которые ты видишь',
          'Теперь послушай и назови 4 звука',
          'Почувствуй 3 ощущения на коже (ветер, ткань, холод)',
          'Назови 2 запаха',
          'Назови 1 вкус',
          'Открой глаза и вернись в момент здесь и сейчас',
        ],
      ),
      // Самоподдержка
      Exercise(
        id: '5',
        title: 'Письмо самому себе',
        description: 'Напиши письмо поддержки себе',
        category: 'self_support',
        durationSeconds: 900, // 15 минут
        instruction:
        'Напиши письмо себе, как если бы ты писал другу в трудный момент.',
        steps: [
          'Возьми бумагу и ручку (или откройся приложение заметок)',
          'Начни с "Милый я"',
          'Напиши о том, что ты чувствуешь и что тебя беспокоит',
          'Дай себе советы, как бы ты дал другу',
          'Напиши о своих сильных сторонах',
          'Заканчивай с любовью к себе',
        ],
      ),
      Exercise(
        id: '6',
        title: 'Техника самообъятия',
        description: 'Физическая поддержка в сложный момент',
        category: 'self_support',
        durationSeconds: 300, // 5 минут
        instruction:
        'Обними себя и утешь, как маленького ребёнка.',
        steps: [
          'Встань или сядь удобно',
          'Скрести руки на груди, как будто обнимаешь себя',
          'Можешь слегка раскачиваться или похлопывать себя',
          'Говори себе мягкие, поддерживающие слова',
          'Остайся в этой позе 5 минут',
          'Почувствуй тепло и безопасность',
        ],
      ),
      // Благодарность
      Exercise(
        id: '7',
        title: 'Три вещи благодарности',
        description: 'Найди три хорошие вещи в текущем дне',
        category: 'gratitude',
        durationSeconds: 300, // 5 минут
        instruction:
        'Назови три маленькие или большие вещи, за которые ты благодарен.',
        steps: [
          'Сядь удобно и подумай о дне',
          'Вспомни первую хорошую вещь (может быть совсем маленькая)',
          'Почувствуй благодарность за неё',
          'Вспомни вторую и третью вещи',
          'Проговори их вслух или напиши',
          'Заметь, как это меняет твои чувства',
        ],
      ),
      Exercise(
        id: '8',
        title: 'Благодарность людям',
        description: 'Вспомни людей, за которых ты благодарен',
        category: 'gratitude',
        durationSeconds: 600, // 10 минут
        instruction:
        'Напиши благодарное письмо или просто вспомни людей, которые помогли тебе.',
        steps: [
          'Подумай о трёх людях, которые тебе помогли',
          'Вспомни конкретный момент, когда они были рядом',
          'Почувствуй благодарность к ним',
          'Если хочешь, напиши им письмо (даже если не отправишь)',
          'Скажи спасибо кому-то близкому',
          'Заметь, как это укрепляет отношения',
        ],
      ),
    ];
  }

  List<Exercise> getExercisesByCategory(String category) {
    return _exercises.where((e) => e.category == category).toList();
  }

  List<String> getCategories() {
    final categories = <String>{};
    for (var exercise in _exercises) {
      categories.add(exercise.category);
    }
    return categories.toList();
  }

  Exercise? getExerciseById(String id) {
    try {
      return _exercises.firstWhere((e) => e.id == id);
    } catch (e) {
      return null;
    }
  }
}
